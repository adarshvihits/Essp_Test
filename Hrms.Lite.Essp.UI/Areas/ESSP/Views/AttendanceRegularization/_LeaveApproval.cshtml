@model Hrms.Lite.Essp.Shared.ESSP.Regularization.AttendanceRegularization

    <div id="trainingEmployeeDetails" class="slider-forms slider-forms-open LeaveApproval">
        <div class="slider-inner-style">
            <div class="slider-form-close" onclick="CloseSlider('LeaveApproval')"><i class="ki ki-close icon-xs text-muted"></i></div>
            <h4 class="mb-4">Leave  Approval</h4>
            <div class="profile-header position-relative pb-12 mb-5" style="padding-bottom: 2px !important; padding-top: 5px !important;">
                <div class="row">
                    <div class="col-md-2">
                        <div class="image-input image-input-outline image-input-circle float-right" id="kt_image_4" style="background-image: url(images/sample-img.jpg)">
                            <div class="image-input-wrapper">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-10 pl-7">
                        <div class="row">

                            <div class="flex-grow-1">
                                <!--begin::Title-->
                                <div class="d-flex justify-content-between flex-wrap">
                                    <div class="d-flex mr-3 header-profile-name">
                                        <span class="">
                                           
                                           @Model.AttendanceRegularizationMyTeamList[0].employeeHeader.EmployeeName
                                           
                                        </span>
                                        <span>
                                            (   @Model.AttendanceRegularizationMyTeamList[0].employeeHeader.EmployeeId
                                            )

                                        </span>

                                    </div>

                                </div>

                                <!--end::Title-->
                                <!--begin::Content-->
                                <div class="d-flex flex-wrap justify-content-between">
                                    <div class="d-flex flex-column flex-grow-1 pr-8">
                                        <div class="d-flex flex-wrap mb-1">
                                            <span data-toggle="tooltip" data-original-title="Designation" class="header-profile-email mr-5 mb-lg-0 mb-2">
                                                <i class="fas fa-briefcase icon-nm mr-2"></i>  
                                                @Model.AttendanceRegularizationMyTeamList[0].employeeHeader.Designation.Name

                                            </span>
                                            <span data-toggle="tooltip" data-original-title="Department" class="header-profile-email mr-5 mb-lg-0 mb-2">
                                                <i class="fas fa-network-wired icon-nm mr-2"></i> 
                                                @Model.AttendanceRegularizationMyTeamList[0].employeeHeader.Department.Name


                                            </span>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="profile-header-overflow"></div>
            </div>



            <div class="row">
                <div class="col-md-4">
                    <div class="row-outer">
                        <label class="view-title">Type:</label>
                        <div class="view-details">
                            @Model.LeaveApplication.LeaveType.Name

                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="row-outer">
                        <label class="view-title">No of Days:</label>
                        <div class="view-details">
                            @Model.LeaveApplication.TotalDays

                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="row-outer">
                        <label class="view-title">Applied On </label>
                        <div class="view-details">

                            @Html.Encode(String.Format("{0:dd-MMM-yyyy}", Model.LeaveApplication.DateOfApplication))
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="row-outer">
                        <label class="view-title">From :</label>
                        <div class="view-details">
                            @*@Html.DisplayFor(m => Model.LeaveApplication.From)*@
                            @*@Model.LeaveApplication.From*@
                            @Html.Encode(String.Format("{0:dd-MMM-yyyy}", Model.LeaveApplication.From))
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="row-outer">
                        <label class="view-title">To:</label>
                        <div class="view-details">

                            @Html.Encode(String.Format("{0:dd-MMM-yyyy}", Model.LeaveApplication.To))

                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="row-outer">
                        <label class="view-title">Reason:</label>
                        <div class="view-details">
                            @*@Html.DisplayFor(m => Model.LeaveApplication.LeaveReason)*@
                            @Model.LeaveApplication.LeaveReason.Name
                        </div>
                    </div>
                </div>
            </div>



            <!--table start here-->


            <div class="ihits-table table-border mobile-responsive-table mb-5">
                <table>
                    <thead>

                        <tr class="table-light">
                            <th style="width: 25%;" scope="col">Date</th>

                            <th scope="col">day</th>
                            <th scope="col">Session</th>



                        </tr>
                    </thead>
                    <tbody>
                        @{


                            if (Model.LeaveApplication.LeaveDetails.DayWiseDetails != null && Model.LeaveApplication.LeaveDetails.DayWiseDetails.Count > 0)
                            {
                                for (int i = 0; i < Model.LeaveApplication.LeaveDetails.DayWiseDetails.Count; i++)

                                {
                                    <tr>
                                        <td data-label="ID">@Html.Encode(String.Format("{0:dd-MMM-yyyy}", Model.LeaveApplication.LeaveDetails.DayWiseDetails[i].LeaveDate))</td>

                                        <td data-label="No of days">
                                            @Model.LeaveApplication.LeaveDetails.DayWiseDetails[i].Day
                                        </td>

                                        <td data-label="From">
                                            @Model.LeaveApplication.LeaveDetails.DayWiseDetails[i].Session.Name
                                        </td>


                                    </tr>
                                }
                            }
                            else
                            {
                                <tr>

                                    <td colspan="3" align="center">  No  Data Found</td>
                                </tr>
                            }
                        }

                    </tbody>
                </table>
            </div>

            <!--table start end-->




            <div class="row">
                <div class="col-md-6">
                    <div class="row-outer">
                        <label class="view-title">Additional Remarks :</label>
                        <div class="view-details">
                            @Model.LeaveApplication.AdditionalRemarks
                        </div>
                    </div>
                    <div class="row-outer">
                        <label class="view-title">Work Handover Details:</label>
                        <div class="view-details">
                            @Model.LeaveApplication.HandOverDetails
                        </div>
                    </div>
                </div>


                <div class="col-md-6 align-right">
                    <div class="row-outer">
                        <label class="view-title">Contact Details:</label>
                        <div class="view-details">
                            @Model.LeaveApplication.ContactDetails
                        </div>
                    </div>

                    <div class="view-details align-right">
                        @Html.HiddenFor(model =>Model.LeaveApplication.Attachment.AbsoluteUri)
                        <a data-toggle="tooltip" data-original-title="View File" class="btn btn-small btn-secondary mobile-full-width" onclick="viewFile()">
                            <i class="icon-xl far fa-eye"></i>View File
                        </a>
                    </div>
                </div>
            </div>

            <br><br>
            <div class="new-tab">
                <div class="tab-outer tab-only">
                    <ul class="ulList" style="height: 141px;">



                        <!-- Tab Start -->
                        <div class="TabMoving"></div>
                        <li class="tabOne clickOnTab active" onclick="onInnerTabClick('tabOne')">Tracker</li>
                        <div id="tabOne" class="tab-content leave-content active" style="display: block; padding: 10px 10px 45px;">



                            <div>
                                <!-- completed -->




                                @if (Model.LeaveApplication.Tracker != null && Model.LeaveApplication.Tracker.Count > 0)
                                {
                                    if (@Model.LeaveApplication.Tracker[3].ApprovalStatus == "Pending")

                                    {

                                        <div class="step">
                                            <div class="v-stepper">
                                                <div class="circle"><i class="fa fa-check"></i></div>
                                                <div class="line"></div>
                                            </div>

                                            <div class="stepper-content">
                                                <div class="row-outer">
                                                    <label class="view-title">@Model.LeaveApplication.Tracker[3].Stage</label>
                                                    <div class="view-details">
                                                        @Model.LeaveApplication.Tracker[3].ApprovalStatus,@Model.LeaveApplication.Tracker[3].Approver
                                                    </div>
                                                </div>



                                            </div>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="step active completed">
                                            <div class="v-stepper">
                                                <div class="circle"><i class="fa fa-check"></i></div>
                                                <div class="line"></div>
                                            </div>

                                            <div class="stepper-content">
                                                <div class="row-outer">
                                                    <label class="view-title">@Model.LeaveApplication.Tracker[3].Stage</label>
                                                    <div class="view-details">
                                                        @*Approved, Kuriakose Joseph, 28/Apr/2022 12:16*@
                                                        @Model.LeaveApplication.Tracker[3].ApprovalStatus,@Model.LeaveApplication.Tracker[3].Approver,@Html.Encode(String.Format("{0:dd-MMM-yyyy hh:mm}", @Model.LeaveApplication.Tracker[3].Date))
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }


                                    if (@Model.LeaveApplication.Tracker[2].ApprovalStatus == "Pending")
                                    {


                                        <!-- active -->
                                        <div class="step">
                                            <div class="v-stepper">
                                                <div class="circle"><i class="fa fa-check"></i></div>
                                                <div class="line"></div>
                                            </div>

                                            <div class="stepper-content">
                                                <div class="row-outer">
                                                    <label class="view-title">@Model.LeaveApplication.Tracker[2].Stage</label>
                                                    <div class="view-details">
                                                        @Model.LeaveApplication.Tracker[3].ApprovalStatus,@Model.LeaveApplication.Tracker[3].Approver
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    }

                                    else
                                    {

                                        <div class="step active completed">
                                            <div class="v-stepper">
                                                <div class="circle"><i class="fa fa-check"></i></div>
                                                <div class="line"></div>
                                            </div>

                                            <div class="stepper-content">
                                                <div class="row-outer">
                                                    <label class="view-title">@Model.LeaveApplication.Tracker[2].Stage</label>
                                                    <div class="view-details">
                                                        @Model.LeaveApplication.Tracker[2].ApprovalStatus,@Model.LeaveApplication.Tracker[2].Approver,@Html.Encode(String.Format("{0:dd-MMM-yyyy hh:mm}", @Model.LeaveApplication.Tracker[2].Date))
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    }
                                    if (@Model.LeaveApplication.Tracker[1].ApprovalStatus == "Pending")
                                    {


                                        <div class="step">
                                            <div class="v-stepper">
                                                <div class="circle"><i class="fa fa-check"></i></div>
                                                <div class="line"></div>
                                            </div>

                                            <div class="stepper-content">
                                                <div class="row-outer">
                                                    <label class="view-title">@Model.LeaveApplication.Tracker[1].Stage</label>
                                                    <div class="view-details">
                                                        @Model.LeaveApplication.Tracker[1].ApprovalStatus,@Model.LeaveApplication.Tracker[1].Approver
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    }
                                    else
                                    {

                                        <!-- regular -->
                                        <div class="step active completed">
                                            <div class="v-stepper">
                                                <div class="circle"><i class="fa fa-check"></i></div>
                                                <div class="line"></div>
                                            </div>

                                            <div class="stepper-content">
                                                <div class="row-outer">

                                                    <label class="view-title">@Model.LeaveApplication.Tracker[1].Stage</label>
                                                    <div class="view-details">
                                                        @Model.LeaveApplication.Tracker[1].ApprovalStatus,@Model.LeaveApplication.Tracker[1].Approver,@Html.Encode(String.Format("{0:dd-MMM-yyyy hh:mm}", @Model.LeaveApplication.Tracker[1].Date))
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    }
                                    <div class="step active completed">
                                        <div class="v-stepper">
                                            <div class="circle"><i class="fa fa-check"></i></div>
                                            <div class="line"></div>
                                        </div>

                                        <div class="stepper-content">
                                            <div class="row-outer">

                                                <label class="view-title">@Model.LeaveApplication.Tracker[0].Stage</label>
                                                <div class="view-details">
                                                    @Model.LeaveApplication.Tracker[0].ApprovalStatus,@Html.Encode(String.Format("{0:dd-MMM-yyyy hh:mm}", @Model.LeaveApplication.Tracker[0].Date))
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>

                        </div>
                        <!-- Tab End -->
                        <!-- Tab Start -->
                        <div class="TabMoving"></div>
                        <li class="tabTwo clickOnTab" onclick="onInnerTabClick('tabTwo')">Other Members On Leave</li>
                        <div id="tabTwo" class="tab-content hide" style="display: none; padding:10px 10px 45px;">

                            @{


                                if (Model.AttendanceRegularizationMyTeamList != null && Model.AttendanceRegularizationMyTeamList.Count > 0)
                                {
                                    for (int i = 0; i < Model.AttendanceRegularizationMyTeamList.Count; i++)

                                    {


                                        <div class="row othermember_leave">
                                            <div class="d-flex align-items-center">
                                                <div class="symbol symbol-60 symbol-xxl-100 mr-5 align-self-start align-self-xxl-center">

                                                    <div class="symbol-label" style="background-image:url('images/profile-img.jpg')"></div>

                                                </div>
                                                <div>
                                                    <div class="font-weight-bolder font-size-h5 text-dark-75 ">@*Subin K Varghese (1258)*@
                                                    @Model.AttendanceRegularizationMyTeamList[i].employeeHeader.EmployeeName
                                                        (@Model.AttendanceRegularizationMyTeamList[i].employeeHeader.EmployeeId)
                                                    </div>
                                                    <div class="text-muted">@Model.AttendanceRegularizationMyTeamList[i].employeeHeader.Designation.Name</div>
                                                    <div class="mt-4">
                                                        <span class="font-weight-bold mr-2 py-2 my-1" style="font-size:11px;">@Model.AttendanceRegularizationMyTeamList[i].LeaveType</span>
                                                        <span class="font-weight-bold py-2 px-3  my-1" style="font-size:10px;">@Html.Encode(String.Format("{0:dd-MMM-yyyy}", Model.AttendanceRegularizationMyTeamList[i].FromDate)) To @Html.Encode(String.Format("{0:dd-MMM-yyyy}", Model.AttendanceRegularizationMyTeamList[i].ToDate))</span>
                                                    </div>
                                                </div>
                                                <div style="font-size: 30px; font-weight: bold; color: darkslategrey;">@Model.AttendanceRegularizationMyTeamList[i].TotalDays</div>
                                            </div>
                                        </div>


                                        @*<div class="row othermember_leave">
                                            <div class="d-flex align-items-center">
                                                <div class="symbol symbol-60 symbol-xxl-100 mr-5 align-self-start align-self-xxl-center">
                                                    <div class="symbol-label" style="background-image:url('images/sample-img.jpg')"></div>

                                                </div>
                                                <div>
                                                    <div class="font-weight-bolder font-size-h5 text-dark-75 ">Krishnakumar (2105)</div>
                                                    <div class="text-muted">UI Developer</div>
                                                    <div class="mt-4">
                                                        <span class="font-weight-bold mr-2 py-2 my-1">Casual Leave</span>
                                                        <span class="font-weight-bold py-2 px-3 px-xxl-5 my-1">26-Apr-20222 To 26-Apr-2022</span>
                                                    </div>
                                                </div>
                                                <div style="font-size: 30px; font-weight: bold; color: darkslategrey;">01</div>
                                            </div>
                                        </div>*@
                                        }
                                    }
                                }


                                    </div>
                        <!-- Tab End -->
                        <!-- Tab Start -->
                        <div class="TabMoving"></div>
                        <li class="tabThree clickOnTab" onclick="onInnerTabClick('tabThree')">
                            Leave Balance
                        </li>
                        <div id="tabThree" class="tab-content hide" style="display: none; padding: 10px 10px 45px;">

                            <div class="ihits-table table-border mobile-responsive-table mb-5">
                                <table>
                                    <thead>
                                        <tr class="table-light">
                                            <th style="width: 25%;" scope="col">Leave Type</th>

                                            <th scope="col">Balance</th>




                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{


                                            if (Model.AttendanceRegularizationLeaveBalance != null && Model.AttendanceRegularizationLeaveBalance.Count > 0)
                                            {
                                                for (int i = 0; i < Model.AttendanceRegularizationLeaveBalance.Count; i++)

                                                {
                                                    <tr>
                                                        <td data-label="ID"> @Model.AttendanceRegularizationLeaveBalance[i].LeaveType</td>

                                                        <td data-label="No of days">
                                                            @Model.AttendanceRegularizationLeaveBalance[i].Balance
                                                        </td>




                                                    </tr>




                                                }
                                                <tr class="table-light">
                                                    <td data-label="ID"><strong>Total</strong></td>

                                                    <td data-label="No of days">
                                                        <strong> @ViewBag.TotalLeaveBalance</strong>
                                                    </td>




                                                </tr>
                                            }
                                        }

                                    </tbody>
                                </table>
                            </div>




                        </div>
                        <!-- Tab End -->

                    </ul>
                </div>



            </div>

            <div class="row card-footer-bottom-fixed">


                <div class="col-md-12 align-right">
                    <a class="btn btn-danger  mobile-full-width" onclick="confirmReject('@Model.LeaveApplication.LeaveApplicationGI', '@Model.AttendanceStatusTypeCode', '@Model.LeaveApplication.LeaveType.Name')">
                        Reject
                    </a>
                    <a class="btn btn-default  mobile-full-width" onclick="confirmApprove('@Model.LeaveApplication.LeaveApplicationGI', '@Model.AttendanceStatusTypeCode', '@Model.LeaveApplication.LeaveType.Name')">
                        Approve
                    </a>
                </div>

            </div>




        </div>
    </div>
   